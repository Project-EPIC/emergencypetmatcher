{% extends 'home/index.html' %}
{% load url from future %}

{% block js %}
    <!-- Page-specific JS goes in this block -->
	<script src = "{{ STATIC_URL }}js/local/epm-matching.js" type = 'text/javascript'></script>
	<script type='text/javascript'>
	    //Define this django-rendered petreport variable as a global javascript variable
		var TARGET_PETREPORT = convert_to_javascript_obj("{{ target_petreport.toJSON }}");
	</script>
{% endblock js %}

{% block head_title %}EPM - Matching {% endblock head_title %}
{% block content_title %} The Matching Interface {% endblock content_title %}

{% block content %}
<div id="matching_body" style="min-height:920px;">
	<div id = "mi_instructions" style ="margin 0 auto; font-size: 14px; font-weight:bold;">
		 Drag a potential match onto the workspace.
	</div>

	<div id="nav">
		<ul>
			<li class="active"><a href="#">Suggested Pets</a></li>
			<!-- <li><a href="#">Manual Search</a></li> -->
		</ul>
	</div>

	<!-- Workspace for Placing Pet Report Candidate Matches-->
	<div id="workspace">

		<!-- Buttons -->
	   	<button id= "button_propose_match" > Propose Match </button>

	   		
		<!-- PetReport Target and Candidates -->
		<div id="prtarget"> 
			<img class='target' src="{{ STATIC_URL }}{{ target_petreport.img_path }}">
			<div class="droppable">
				<div style="text-align:center; padding:5%; margin:20%;">Drag a Pet Report Here</div>
			</div>
		</div>
		
		<div id="workspace_match_detail">

<!-- 			<div class = "matching_img"></div>
 -->		
				<!-- Target PetReport info -->	
				<ul class = "target_prdpfields"style="list-style-type:none;width:40%;float:left; padding-left:10px;" > </ul>

				<!-- PetReport info -->
				<ul class = "matching_prdpfields" style="list-style-type:none;width:40%;float:right; padding-left:10px;" > </ul>
			
		
		</div>
		
	</div>

	<!-- Container for ML-Ranked Pet Reports -->
	<div id="matching_container">
		<ul id="tiles">
			{% block pet_reports_content %}
				{% if candidate_matches %}
					{% for pet_report in candidate_matches %}
						<li class="item" >
							<script> 
							    //Define this django-rendered petreport variable as a global javascript variable
								var CANDIDATE_PETREPORT = convert_to_javascript_obj("{{ pet_report.toJSON }}");
							</script>
							<div id = "prdpdialog">
								<a href= "{% url 'disp_PetReport' pet_report.id %}" name="{{ pet_report.pet_name }}">
									<strong>{{ pet_report.pet_name }}</strong><br/>
									{{ pet_report.status }}: {{ pet_report.pet_type }} <br/>
									Contact : {{ pet_report.proposed_by.user.username }}
									<img src="{{ STATIC_URL }}{{ pet_report.img_path }}"/>
								</a>
							</div>
						</li>	
					{% endfor %}							
				{% else %}
				    <p>No pet reports are available.</p>
				{% endif %}
			{% endblock pet_reports_content %}
		</ul>	
	</div>

	{% block chat %}
	{% endblock chat %}
</div>
{% endblock content %}
