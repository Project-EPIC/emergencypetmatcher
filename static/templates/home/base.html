{% load url from future %} <!-- Need this for forward (future) compatibility with django 1.5 and beyond. -->

<!DOCTYPE html>
<html class = 'no-js' lang = "en">

	<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
	<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
	<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
	<!--[if gt IE 8]> <html class="no-js" lang="en"> <![endif]-->
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>{% block head_title %} EmergencyPetMatcher (EPM) {% endblock head_title %}</title>
		<meta name="keywords" content="pet-family reunification, emergency, research, software engineering, disaster"/>
		<meta name="description" content="" />
		<!-- CSS -->
		<link rel="stylesheet" href="{{ STATIC_URL }}css/style.css" type="text/css">
		<link rel="stylesheet" href="{{ STATIC_URL }}css/reset.css" type="text/css">
		<link rel="stylesheet" href="{{ STATIC_URL }}css/jquery-ui-1.8.css" type="text/css">
		<!-- Javascript & JQuery -->
		<script src="{{ STATIC_URL }}js/browserid-include.js" type="text/javascript"></script>
		<script src="{{ STATIC_URL }}js/jquery-min.js" type="text/javascript"></script>
		<script src="{{ STATIC_URL }}js/jquery-ui-min.js" type="text/javascript"></script>
		<!-- Include the BlockUI plugin -->
		<script src="{{ STATIC_URL }}js/BlockUI.js" type="text/javascript"></script>
		<!-- Include the hoverIntent plug-in -->
		<script src="{{ STATIC_URL }}js/jquery.hoverIntent.js" type="text/javascript"></script>
		<!-- Include the waypoints plug-in -->
		<script src="{{ STATIC_URL }}js/jquery.waypoints.js"></script>
		<!-- Include the imagesLoaded plug-in -->
		<script src="{{ STATIC_URL }}js/jquery.imagesloaded.js"></script>
		<!-- Include the plug-in -->
		<script src="{{ STATIC_URL }}js/jquery.wookmark.js"></script>

		<!-- General, inheritable JS goes here -->
		<script type="text/javascript"> </script>
		<!-- Page-specific JS goes in this block -->
		{% block js %}
		<script type = 'text/javascript'>

			//This function allows us to prepare a popup upon clicking several elements.
			$(document).ready(function(){




				$("#prdpdialog a").click(function(){

					var link = $(this);
					var dialog_box = $("<div></div>").load(link.attr('href')).dialog ({

						autoOpen: true,
						position: "top",
						closeOnEscape: true,
						title:link.attr('name'),
						height: "auto",
						modal: true,
						width: 700,
						resizable: false,
						show: {effect:"fade", duration:500},
						close: function(event, ui){ 
							dialog_box.dialog('destroy').remove();
						}

					});
					return false;
				});

				$('#tiles').imagesLoaded(function() {
				
					// Prepare layout options.
					var options = {
						autoResize: true, // This will auto-update the layout when the browser window is resized.
						container: $('#tiles'), // Optional, used for some extra CSS styling
						offset: 2, // Optional, the distance between grid items
						itemWidth: 210 // Optional, the width of a grid item
					};
					
					// Get a reference to your grid items.
					var handler = $('#tiles li.item');
					// Call the layout function.
					handler.wookmark(options);
					
				});
			});
		</script>
		{% endblock js %}			

		{% block headers %} {% endblock headers %}
	</head>	
	<body>

		<!-- container for main divs: 1) header, 2) body, 3) footer-->
		<div id = "container">

			<!-- start header with TITLE and MENU -->			
			<div id="header">

				<div id="logo">
					<h1><a href="{% url 'home' %}">EmergencyPetMatcher</a></h1>
						<p> <a href = "http://epic.cs.colorado.edu"> Project EPIC </a></p>
				</div>

				<!-- Share Buttons -->
			 	<div id="sharebuttons" style="float:right">
		            <div style="float:left; margin-top:9px; margin-bottom:7px;">
		              <font size=-1> Share on: </font>
		            </div>
		            <div style="float:left; margin:3px 0 0 7px;">

		                <a title="Share on Facebook"
		                   target='_blank' 
		                   name="fb_share" 
		                   type="button_count"
		                   expr:share_url='data:post.url'  
		                   href="http://www.facebook.com/sharer.php?s=100&p[url]=http://emergencypetmatcher.herokuapp.com:8000/&p[images][0]={{ STATIC_URL }}/images/epm.jpg&p[title]=EmergencyPetMatcher Website&p[summary]=EmergencyPetMatcher Website is part of Project EPIC at University of Colorado at Boulder."
		                   onclick="window.open('http://www.facebook.com/sharer.php?s=100&p[url]=http://emergencypetmatcher.herokuapp.com:8000/&p[images][0]={{ STATIC_URL }}/images/epm.jpg&p[title]=EmergencyPetMatcher Website&p[summary]=EmergencyPetMatcher Website is part of Project EPIC at University of Colorado at Boulder.', 
		                   'newWindow', 'width=700, height=430'); return false;"><img src="{{ STATIC_URL }}/images/icons/icn-facebook.png" width="22" height="22" /></a>

		                <a title="Share on Twitter" 
		                    target="_blank" 
		                    expr:share_url='data:post.url'
		                    href="http://twitter.com/share?text=EmergencyPetMatcher Website is part of Project EPIC at University of Colorado at Boulder.&url=http://emergencypetmatcher.herokuapp.com:8000/" 
		                    onclick="window.open('http://twitter.com/share?text=EmergencyPetMatcher Website is part of Project EPIC at University of Colorado at Boulder.&url=http://emergencypetmatcher.herokuapp.com:8000/', 'newWindow', 'width=700, height=430'); return false;"><img src="{{ STATIC_URL }}/images/icons/icn-twitter.png" width="22" height="22"></a> 
		              </div>
			     </div>

		

				<div id="menu">
					<ul>
						{% block menu %}
						<li><a href="{% url 'home' %}"> Home</a></li>

						{% if user.is_authenticated %}
						
						<li>
							<a href= "{% url 'get_UserProfile_page' user.id %}">{{ user.username }}</a>
	
						</li>
							<form method = "post" action= "{% url 'logout_User' %}">
								{% csrf_token %} <input id="logout" type="submit" value="Logout"/>
							</form>
						</li>
						<li><a href= "{% url 'submit_PetReport' %}">Submit a Lost/Found Pet Report</a></li>
						{% else %}
						<li><a href= "{% url 'login_User' %}?next={% firstof request.path '/' %}">Login/Register</a></li>
						{% endif %}

						<li><a href="#">About</a></li>
						
						{% endblock menu %}
					</ul>
				</div>
			</div>

			<br/><br/><br/><br/>
          	<!-- end header -->
			
			<div id="body">

				<h2>{% block content_title %}{% endblock content_title %}</h2>
				<h3>{% block content_subtitle %}{% endblock content_subtitle %}</h3>


				{% if messages %}
				<ul id="messages">
				    {% for message in messages %}
				    <li id="message"{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
				    {% endfor %}
				</ul>
				{% endif %}
				

				<!-- start content -->
				{% block content %}				

				<div id="nav">
					<ul>
					{% if user.is_authenticated %}
						<li><a href="#">Friends</a></li>
						<li><a href="#">Bookmarked</a></li>
						<li><a href="#">My Pet Matches</a></li>
					{% endif %}
						<li class="active"><a href="#">Newly Added</a></li>
						<li><a href="#">Proposed Pet Matches</a></li>
					</ul>
				</div>

				<ul id="tiles">

					{% block friends_activity_feed %}
						<li class="item feed">
							<h3>Friends' Activity</h3>
							<ul class="feedlist"></ul>
						</li>
					{% endblock friends_activity_feed %}

					{% block pet_reports_content %}
						{% if pet_reports_list %}
							{% for pet_report in pet_reports_list %}
								<li class="item" >
									<div id = "prdpdialog">
										<a href= "{% url 'disp_PetReport' pet_report.id %}" name = "{{ pet_report.pet_name }}">
											{% if pet_report.pet_name %}
												<strong>{{ pet_report.pet_name }}</strong><br/>
											{% endif %}
											{{ pet_report.status }}: {{ pet_report.pet_type }} <br/>
											Contact : {{  pet_report.proposed_by.user.username }}
											<img src="{{ STATIC_URL }}{{ pet_report.img_path }}"/>
										</a>
									</div>
								</li>	
							{% endfor %}							
						{% else %}
						    <li style="text-align:center;"><h3>No pet reports are available.</h3></li>
						{% endif %}
					{% endblock pet_reports_content %}
				</ul>	
				

				<div class="pagination" align="center">
					Page {{ pet_reports_list.number }} of {{ pet_reports_list.paginator.num_pages }}.
	        		<div class="step-links" style="float:center;">	
	        			{% if pet_reports_list.has_previous %}
	           				<a href="?page={{ pet_reports_list.previous_page_number }}"> previous |</a>
	        			{% endif %}

	         			{% for i in pet_reports_list.paginator.page_range %}
	           				<a href="?page={{ i }}"> {{ i }} | </a>
	        			{% endfor %}
	        			{% if pet_reports_list.has_next %}
	            			<a href="?page={{ pet_reports_list.next_page_number }}"> next </a>
	        			{% endif %}
	        		</div>
	    		</div>
				<br style="clear: both;"/>

				{% block chat %} 
				<div id="chat">	
				<!--implement chat here; chat should seamlessly always be part of all web pages. -->
				</div>
				{% endblock chat %}			

				{% endblock content %}
			</div>

			<!-- start footer -->
			<div id = "footer">
				<p id="legal"> &copy;2012 Project EPIC . All Rights Reserved.
			</div>

		</div>		
		<!-- end container -->
	
	</body>
</html>
