function vote(e){return"None"==USER_ID?($(".pmdp_messages").html("<li class='error'> You cannot vote for this Pet Match because you are not logged in! "+URL_LOGIN+"</li>"),!1):(csrf_value=$("input").attr("value"),$.ajax({type:"POST",url:URL_VOTE_PETMATCH,data:{csrfmiddlewaretoken:csrf_value,vote:e,match_id:PETMATCH_ID,user_id:USER_ID},success:function(e){return $(".pmdp_messages").html("<li class='success'>"+e.message+"</li>"),$("#pmdp_downvote_number").html(e.num_downvotes),$("#pmdp_upvote_number").html(e.num_upvotes),1==e.threshold_reached&&($("#pmdp_downvote_button").attr("src",DOWNVOTE_BUTTON_INACTIVE_LINK),$("#pmdp_downvote_button").css("cursor","default"),$("#pmdp_upvote_button").attr("src",UPVOTE_BUTTON_INACTIVE_LINK),$("#pmdp_upvote_button").css("cursor","default")),!0},error:function(){return alert("An unexpected error occurred when trying to "+e+" this PetMatch."),!1}}),!0)}$(document).ready(function(){var e=$("#pmdp_downvote_button"),t=$("#pmdp_upvote_button");e.click(function(){$(this).attr("src")!=DOWNVOTE_BUTTON_INACTIVE_LINK&&1==vote(DOWNVOTE)&&($(this).attr("src",DOWNVOTE_BUTTON_INACTIVE_LINK),$(this).css("cursor","default"),t.attr("src",UPVOTE_BUTTON_ACTIVE_LINK),t.css("cursor","pointer"))}),t.click(function(){$(this).attr("src")!=UPVOTE_BUTTON_INACTIVE_LINK&&1==vote(UPVOTE)&&($(this).attr("src",UPVOTE_BUTTON_INACTIVE_LINK),$(this).css("cursor","default"),e.attr("src",DOWNVOTE_BUTTON_ACTIVE_LINK),e.css("cursor","pointer"))}),$("#facebook_share_pm").click(function(){share_on_facebook(PETMATCH_URL,PETMATCH_IMAGE,PETMATCH_TITLE,PETMATCH_CAPTION,PETMATCH_SUMMARY)}),$("#twitter_share_pm").click(function(){share_on_twitter(PETMATCH_URL,PETMATCH_IMAGE,PETMATCH_TITLE,PETMATCH_SUMMARY)}),USER_HAS_VOTED==UPVOTE?(t.attr("src",UPVOTE_BUTTON_INACTIVE_LINK),t.css("cursor","default")):USER_HAS_VOTED==DOWNVOTE&&(e.attr("src",DOWNVOTE_BUTTON_INACTIVE_LINK),e.css("cursor","default")),display_PetReport_fields({petreport:LOST_PETREPORT,list:$("#lost_prdpfields")}),display_PetReport_fields({petreport:FOUND_PETREPORT,list:$("#found_prdpfields")}),highlight_field_matches($("#lost_prdpfields"),$("#found_prdpfields")),$("#lost_pet_pic_wrapper img").on("mouseover",function(){$(this).parent().zoom(),$("#lost_pet_pic_wrapper img:not(:first)").remove()}),$("#found_pet_pic_wrapper img").on("mouseover",function(){$(this).parent().zoom(),$("#found_pet_pic_wrapper img:not(:first)").remove()}),"False"==PETMATCH_IS_OPEN&&($("#pmdp_downvote_button").attr("src",DOWNVOTE_BUTTON_INACTIVE_LINK),$("#pmdp_downvote_button").css("cursor","default"),$("#pmdp_upvote_button").attr("src",UPVOTE_BUTTON_INACTIVE_LINK),$("#pmdp_upvote_button").css("cursor","default"),"True"==PETMATCH_IS_SUCCESSFUL?$(".pmdp_messages").html("<li class='success'> This pet match is finally reunited with its owner. Thank you, digital volunteers!</li>"):$(".pmdp_messages").html("<li class='info'> This pet match is now being checked by its pet contacts.</li>"))});