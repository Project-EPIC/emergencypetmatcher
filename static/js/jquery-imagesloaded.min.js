!function(e){"use strict";function t(){}function r(e,t){if(n)return t.indexOf(e);for(var r=t.length;r--;)if(t[r]===e)return r;return-1}var a=t.prototype,n=Array.prototype.indexOf?!0:!1;a._getEvents=function(){return this._events||(this._events={})},a.getListeners=function(e){var t,r,a=this._getEvents();if("object"==typeof e){t={};for(r in a)a.hasOwnProperty(r)&&e.test(r)&&(t[r]=a[r])}else t=a[e]||(a[e]=[]);return t},a.getListenersAsObject=function(e){var t,r=this.getListeners(e);return r instanceof Array&&(t={},t[e]=r),t||r},a.addListener=function(e,t){var a,n=this.getListenersAsObject(e);for(a in n)n.hasOwnProperty(a)&&-1===r(t,n[a])&&n[a].push(t);return this},a.on=a.addListener,a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var a,n,o=this.getListenersAsObject(e);for(n in o)o.hasOwnProperty(n)&&(a=r(t,o[n]),-1!==a&&o[n].splice(a,1));return this},a.off=a.removeListener,a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,r){var a,n,o=e?this.removeListener:this.addListener,i=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(a=r.length;a--;)o.call(this,t,r[a]);else for(a in t)t.hasOwnProperty(a)&&(n=t[a])&&("function"==typeof n?o.call(this,a,n):i.call(this,a,n));return this},a.removeEvent=function(e){var t,r=typeof e,a=this._getEvents();if("string"===r)delete a[e];else if("object"===r)for(t in a)a.hasOwnProperty(t)&&e.test(t)&&delete a[t];else delete this._events;return this},a.emitEvent=function(e,t){var r,a,n,o=this.getListenersAsObject(e);for(a in o)if(o.hasOwnProperty(a))for(r=o[a].length;r--;)n=t?o[a][r].apply(null,t):o[a][r](),n===!0&&this.removeListener(e,o[a][r]);return this},a.trigger=a.emitEvent,a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},"function"==typeof define&&define.amd?define(function(){return t}):e.EventEmitter=t}(this),function(e){"use strict";var t=document.documentElement,r=function(){};t.addEventListener?r=function(e,t,r){e.addEventListener(t,r,!1)}:t.attachEvent&&(r=function(t,r,a){t[r+a]=a.handleEvent?function(){var t=e.event;t.target=t.target||t.srcElement,a.handleEvent.call(a,t)}:function(){var r=e.event;r.target=r.target||r.srcElement,a.call(t,r)},t.attachEvent("on"+r,t[r+a])});var a=function(){};t.removeEventListener?a=function(e,t,r){e.removeEventListener(t,r,!1)}:t.detachEvent&&(a=function(e,t,r){e.detachEvent("on"+t,e[t+r]);try{delete e[t+r]}catch(a){e[t+r]=void 0}});var n={bind:r,unbind:a};"function"==typeof define&&define.amd?define(n):e.eventie=n}(this),function(e){"use strict";function t(e,t){for(var r in t)e[r]=t[r];return e}function r(e){return"[object Array]"===d.call(e)}function a(e){var t=[];if(r(e))t=e;else if("number"==typeof e.length)for(var a=0,n=e.length;n>a;a++)t.push(e[a]);else t.push(e);return t}function n(e,r){function n(e,r,i){if(!(this instanceof n))return new n(e,r);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=a(e),this.options=t({},this.options),"function"==typeof r?i=r:t(this.options,r),i&&this.on("always",i),this.getImages(),o&&(this.jqDeferred=new o.Deferred);var s=this;setTimeout(function(){s.check()})}function d(e){this.img=e}n.prototype=new e,n.prototype.options={},n.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var r=this.elements[e];"IMG"===r.nodeName&&this.addImage(r);for(var a=r.querySelectorAll("img"),n=0,o=a.length;o>n;n++){var i=a[n];this.addImage(i)}}},n.prototype.addImage=function(e){var t=new d(e);this.images.push(t)},n.prototype.check=function(){function e(e,n){return t.options.debug&&s&&i.log("confirm",e,n),t.progress(e),r++,r===a&&t.complete(),!0}var t=this,r=0,a=this.images.length;if(this.hasAnyBroken=!1,!a)return this.complete(),void 0;for(var n=0;a>n;n++){var o=this.images[n];o.on("confirm",e),o.check()}},n.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emit("progress",this,e),this.jqDeferred&&this.jqDeferred.notify(this,e)},n.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emit(e,this),this.emit("always",this),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},o&&(o.fn.imagesLoaded=function(e,t){var r=new n(this,e,t);return r.jqDeferred.promise(o(this))});var l={};return d.prototype=new e,d.prototype.check=function(){var e=l[this.img.src];if(e)return this.useCached(e),void 0;if(l[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var t=this.proxyImage=new Image;r.bind(t,"load",this),r.bind(t,"error",this),t.src=this.img.src},d.prototype.useCached=function(e){if(e.isConfirmed)this.confirm(e.isLoaded,"cached was confirmed");else{var t=this;e.on("confirm",function(e){return t.confirm(e.isLoaded,"cache emitted confirmed"),!0})}},d.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},d.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},d.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},d.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},d.prototype.unbindProxyEvents=function(){r.unbind(this.proxyImage,"load",this),r.unbind(this.proxyImage,"error",this)},n}var o=e.jQuery,i=e.console,s="undefined"!=typeof i,d=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter","eventie"],n):e.imagesLoaded=n(e.EventEmitter,e.eventie)}(window);